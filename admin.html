<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Daal Â· Panel Admin</title>
  <link rel="icon" type="image/x-icon" href="/assets/Recurso-2.ico">
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Jost:wght@300;400;500&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --cream: #f5efe6;
      --gold: #b8956a;
      --gold-dark: #8a6840;
      --ink: #2c2416;
      --muted: #7a6a54;
      --white: #fdfaf6;
      --error: #c0392b;
      --success: #4a7a4a;
    }

    body {
      font-family: 'Jost', sans-serif;
      background: var(--cream);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
    }

    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background:
        radial-gradient(ellipse 60% 50% at 15% 20%, rgba(184,149,106,0.13) 0%, transparent 60%),
        radial-gradient(ellipse 50% 60% at 85% 80%, rgba(184,149,106,0.10) 0%, transparent 60%);
      pointer-events: none;
    }

    .card {
      background: var(--white);
      border: 1px solid rgba(184,149,106,0.25);
      border-radius: 2px;
      width: 100%;
      max-width: 460px;
      padding: 52px 48px;
      box-shadow: 0 4px 32px rgba(44,36,22,0.07), 0 1px 3px rgba(44,36,22,0.04);
      position: relative;
      animation: fadeUp 0.5s ease both;
    }

    .card::before { content: 'âœ¦'; position: absolute; top: 16px; left: 20px; font-size: 14px; color: var(--gold); opacity: 0.45; }
    .card::after  { content: 'âœ¦'; position: absolute; bottom: 16px; right: 20px; font-size: 14px; color: var(--gold); opacity: 0.45; }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(18px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* â”€â”€ Brand â”€â”€ */
    .brand { text-align: center; margin-bottom: 36px; }
    .brand-monogram {
      font-family: 'Cormorant Garamond', serif;
      font-size: 50px;
      font-weight: 300;
      letter-spacing: 0.14em;
      color: var(--ink);
      line-height: 1;
      display: block;
    }
    .brand-sub {
      font-size: 9.5px;
      font-weight: 400;
      letter-spacing: 0.38em;
      color: var(--gold);
      text-transform: uppercase;
      margin-top: 7px;
      display: block;
    }

    /* â”€â”€ Divider â”€â”€ */
    .divider {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 26px 0;
    }
    .divider::before, .divider::after {
      content: '';
      flex: 1;
      height: 1px;
      background: linear-gradient(to right, transparent, rgba(184,149,106,0.3), transparent);
    }
    .divider span { font-size: 11px; color: var(--gold); opacity: 0.55; }

    /* â”€â”€ Section title â”€â”€ */
    .section-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 12.5px;
      letter-spacing: 0.26em;
      text-transform: uppercase;
      color: var(--muted);
      text-align: center;
      margin-bottom: 20px;
    }

    /* â”€â”€ Form â”€â”€ */
    .form-group { margin-bottom: 15px; }

    label {
      display: block;
      font-size: 10.5px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 6px;
    }

    input[type="email"],
    input[type="password"],
    input[type="text"] {
      width: 100%;
      padding: 11px 13px;
      border: 1px solid rgba(184,149,106,0.28);
      border-radius: 1px;
      background: var(--cream);
      font-family: 'Jost', sans-serif;
      font-size: 14px;
      color: var(--ink);
      outline: none;
      transition: border-color 0.2s, background 0.2s;
    }
    input:focus { border-color: var(--gold); background: var(--white); }
    input::placeholder { color: rgba(122,106,84,0.38); }

    /* â”€â”€ Buttons â”€â”€ */
    .btn {
      width: 100%;
      padding: 12px 18px;
      border: none;
      cursor: pointer;
      font-family: 'Jost', sans-serif;
      font-size: 10.5px;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      font-weight: 500;
      border-radius: 1px;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    .btn:disabled { opacity: 0.45; cursor: not-allowed; }

    .btn-primary { background: var(--gold); color: var(--white); margin-top: 22px; }
    .btn-primary:hover:not(:disabled) { background: var(--gold-dark); }

    .btn-secondary {
      background: transparent;
      border: 1px solid rgba(184,149,106,0.38);
      color: var(--gold-dark);
      margin-top: 10px;
    }
    .btn-secondary:hover:not(:disabled) { background: rgba(184,149,106,0.09); border-color: var(--gold); }

    .btn-dark { background: var(--ink); color: var(--cream); margin-top: 10px; }
    .btn-dark:hover:not(:disabled) { background: #3d3020; }
    .btn-dark.copied { background: var(--success); }

    /* â”€â”€ Messages â”€â”€ */
    .msg {
      padding: 10px 13px;
      border-radius: 1px;
      font-size: 12.5px;
      line-height: 1.5;
      margin-top: 11px;
      display: none;
    }
    .msg.error   { background: rgba(192,57,43,0.07); border-left: 3px solid var(--error); color: var(--error); display: block; }
    .msg.success { background: rgba(74,122,74,0.07); border-left: 3px solid var(--success); color: var(--success); display: block; }

    /* â”€â”€ Token display â”€â”€ */
    .token-wrap { margin-top: 16px; display: none; animation: fadeUp 0.3s ease both; }
    .token-label {
      font-size: 10px;
      letter-spacing: 0.22em;
      text-transform: uppercase;
      color: var(--gold-dark);
      margin-bottom: 7px;
    }
    .token-box {
      background: var(--cream);
      border: 1px solid rgba(184,149,106,0.22);
      padding: 11px 13px;
      font-family: 'Courier New', monospace;
      font-size: 11.5px;
      color: var(--muted);
      word-break: break-all;
      line-height: 1.55;
      border-radius: 1px;
      max-height: 76px;
      overflow-y: auto;
    }

    /* â”€â”€ User info â”€â”€ */
    .user-info { text-align: center; margin-bottom: 24px; }
    .avatar {
      width: 52px; height: 52px; border-radius: 50%;
      background: linear-gradient(135deg, var(--gold), var(--gold-dark));
      display: flex; align-items: center; justify-content: center;
      font-family: 'Cormorant Garamond', serif;
      font-size: 22px; color: var(--white);
      margin: 0 auto 10px;
    }
    .user-email { font-size: 12px; color: var(--muted); letter-spacing: 0.06em; }

    /* â”€â”€ Token list â”€â”€ */
    .tokens-list { margin-top: 8px; max-height: 220px; overflow-y: auto; }
    .token-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 9px 11px;
      border: 1px solid rgba(184,149,106,0.18);
      border-radius: 1px;
      margin-bottom: 6px;
      background: var(--cream);
      gap: 10px;
      font-size: 12px;
    }
    .token-row .tk-val {
      font-family: 'Courier New', monospace;
      font-size: 10.5px;
      color: var(--muted);
      flex: 1;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .token-row .tk-badge {
      font-size: 9.5px;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      padding: 2px 7px;
      border-radius: 999px;
      flex-shrink: 0;
    }
    .tk-badge.active { background: rgba(74,122,74,0.12); color: var(--success); }
    .tk-badge.usado  { background: rgba(122,106,84,0.12); color: var(--muted); }
    .token-row .tk-copy {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 14px;
      padding: 0 2px;
      flex-shrink: 0;
      opacity: 0.6;
      transition: opacity 0.15s;
    }
    .token-row .tk-copy:hover { opacity: 1; }

    /* â”€â”€ Footer â”€â”€ */
    .footer-date {
      text-align: center;
      font-size: 9.5px;
      letter-spacing: 0.32em;
      color: rgba(122,106,84,0.45);
      text-transform: uppercase;
      margin-top: 26px;
      padding-top: 18px;
      border-top: 1px solid rgba(184,149,106,0.12);
    }

    .logout-link {
      display: block;
      text-align: center;
      margin-top: 24px;
      font-size: 10.5px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--muted);
      cursor: pointer;
      transition: color 0.2s;
      user-select: none;
    }
    .logout-link:hover { color: var(--gold-dark); }

    /* â”€â”€ Spinner â”€â”€ */
    .spinner {
      width: 13px; height: 13px;
      border: 2px solid rgba(255,255,255,0.35);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.7s linear infinite;
      display: none;
      flex-shrink: 0;
    }
    .spinner.dark { border-color: rgba(184,149,106,0.3); border-top-color: var(--gold); }
    @keyframes spin { to { transform: rotate(360deg); } }

    @media (max-width: 520px) {
      .card { padding: 38px 24px; }
    }
  </style>
</head>
<body>

<div class="card">

  <div class="brand">
    <span class="brand-monogram">DAAL</span>
    <span class="brand-sub">Panel de AdministraciÃ³n</span>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       VISTA: LOGIN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="view-login">
    <p class="section-title">Acceso Privado</p>

    <div class="form-group">
      <label for="inp-email">Correo electrÃ³nico</label>
      <input type="email" id="inp-email" placeholder="tu@correo.com" autocomplete="email" />
    </div>
    <div class="form-group">
      <label for="inp-pass">ContraseÃ±a</label>
      <input type="password" id="inp-pass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password" />
    </div>

    <div id="msg-login" class="msg"></div>

    <button class="btn btn-primary" id="btn-login" onclick="handleLogin()">
      <span class="spinner" id="sp-login"></span>
      <span id="txt-login">Ingresar</span>
    </button>

    <div class="footer-date">25 Â· IV Â· 2026 &nbsp;Â·&nbsp; Santa Marta</div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       VISTA: DASHBOARD
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="view-dash" style="display:none;">

    <div class="user-info">
      <div class="avatar" id="dash-avatar">A</div>
      <div class="user-email" id="dash-email"></div>
    </div>

    <div class="divider"><span>âœ¦</span></div>

    <!-- â”€â”€ Generar token â”€â”€ -->
    <p class="section-title">Generar InvitaciÃ³n</p>

    <div class="form-group">
      <label for="inp-guest">Nombre del invitado (opcional)</label>
      <input type="text" id="inp-guest" placeholder="Ej. Juan & MarÃ­a" />
    </div>

    <button class="btn btn-secondary" id="btn-gen" onclick="crearToken()">
      <span class="spinner dark" id="sp-gen"></span>
      <span id="txt-gen">âœ¦ &nbsp; Generar Enlace</span>
    </button>

    <div id="msg-gen" class="msg"></div>

    <!-- â”€â”€ Link generado â”€â”€ -->
    <div class="token-wrap" id="token-wrap">
      <div class="token-label">Enlace generado</div>
      <div class="token-box" id="token-box"></div>

      <button class="btn btn-dark" id="btn-copy" onclick="copiarLink()">
        &nbsp; Copiar enlace
      </button>
      <button class="btn btn-secondary" onclick="compartirLink()">
        &nbsp; Compartir
      </button>
    </div>

    <div class="divider" style="margin-top:28px;"><span>âœ¦</span></div>

    <!-- â”€â”€ Historial de tokens â”€â”€ -->
    <p class="section-title">Invitaciones Creadas</p>

    <button class="btn btn-secondary" style="margin-top:0;" onclick="cargarTokens()">
      <span class="spinner dark" id="sp-list"></span>
      <span id="txt-list">â†» &nbsp; Actualizar lista</span>
    </button>

    <div class="tokens-list" id="tokens-list"></div>
    <div id="msg-list" class="msg"></div>

    <span class="logout-link" onclick="handleLogout()">âœ¦ &nbsp; Cerrar sesiÃ³n</span>
    <div class="footer-date">25 Â· IV Â· 2026 &nbsp;Â·&nbsp; Santa Marta</div>
  </div>

</div><!-- /card -->

<script>
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  //  âš™ï¸  CONFIGURACIÃ“N â€” reemplaza con tus datos reales
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  const SUPABASE_URL  = 'https://oyyehipwuipkopvnvzck.supabase.co';
  const SUPABASE_ANON = 'sb_publishable_NrN6Sc2wTvKCK1CCh5Zvyw_FtuIsLVB';
  const SITE_URL      = 'http://127.0.0.1:5500/'; // URL base de la tarjeta
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  const { createClient } = supabase;
  const sb = createClient(SUPABASE_URL, SUPABASE_ANON);

  let generatedLink = '';

  // â”€â”€ Verificar sesiÃ³n al cargar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  (async () => {
    const { data: { session } } = await sb.auth.getSession();
    if (session) mostrarDash(session.user);
  })();

  // â”€â”€ LOGIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  async function handleLogin() {
    const email = document.getElementById('inp-email').value.trim();
    const pass  = document.getElementById('inp-pass').value;
    const msgEl = document.getElementById('msg-login');
    clearMsg(msgEl);

    if (!email || !pass) {
      return showMsg(msgEl, 'error', 'Completa todos los campos.');
    }

    setBtn('btn-login', 'sp-login', 'txt-login', true, 'Ingresandoâ€¦');

    const { data, error } = await sb.auth.signInWithPassword({ email, password: pass });

    if (error) {
      showMsg(msgEl, 'error', 'Credenciales incorrectas. Verifica e intenta de nuevo.');
      setBtn('btn-login', 'sp-login', 'txt-login', false, 'Ingresar');
      return;
    }
    mostrarDash(data.user);
  }

  // â”€â”€ LOGOUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  async function handleLogout() {
    await sb.auth.signOut();
    document.getElementById('view-dash').style.display  = 'none';
    document.getElementById('view-login').style.display = 'block';
    document.getElementById('token-wrap').style.display = 'none';
    document.getElementById('tokens-list').innerHTML    = '';
    clearMsg(document.getElementById('msg-login'));
    clearMsg(document.getElementById('msg-gen'));
  }

  // â”€â”€ MOSTRAR DASHBOARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function mostrarDash(user) {
    document.getElementById('view-login').style.display = 'none';
    document.getElementById('view-dash').style.display  = 'block';
    document.getElementById('dash-email').textContent   = user.email;
    document.getElementById('dash-avatar').textContent  = user.email.charAt(0).toUpperCase();
    cargarTokens();
  }

  // â”€â”€ CREAR TOKEN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  async function crearToken() {
    const msgEl = document.getElementById('msg-gen');
    clearMsg(msgEl);
    setBtn('btn-gen', 'sp-gen', 'txt-gen', true, 'Generandoâ€¦');

    // Verificar sesiÃ³n activa
    const { data: { session } } = await sb.auth.getSession();
    if (!session) {
      showMsg(msgEl, 'error', 'SesiÃ³n expirada. Por favor vuelve a iniciar sesiÃ³n.');
      setBtn('btn-gen', 'sp-gen', 'txt-gen', false, 'âœ¦ &nbsp; Generar Enlace');
      return;
    }

    // Insertar token en Supabase â€” gen_random_uuid() lo genera automÃ¡ticamente
    const { data, error } = await sb
      .from('tokens')
      .insert({ usado: false })
      .select()
      .single();

    if (error || !data) {
      showMsg(msgEl, 'error', 'Error al generar el token. Verifica la tabla en Supabase.');
      setBtn('btn-gen', 'sp-gen', 'txt-gen', false, 'âœ¦ &nbsp; Generar Enlace');
      return;
    }

    // Construir el link
    generatedLink = `${SITE_URL}/?token=${data.token}`;

    document.getElementById('token-box').textContent = generatedLink;
    document.getElementById('token-wrap').style.display = 'block';
    showMsg(msgEl, 'success', 'âœ¦ Enlace generado. VÃ¡lido hasta que el invitado lo use.');
    setBtn('btn-gen', 'sp-gen', 'txt-gen', false, 'âœ¦ &nbsp; Generar Enlace');

    // Refrescar lista
    cargarTokens();
  }

  // â”€â”€ COPIAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  async function copiarLink() {
    if (!generatedLink) return;
    try {
      await navigator.clipboard.writeText(generatedLink);
    } catch {
      // Fallback selecciÃ³n
      const box = document.getElementById('token-box');
      const r = document.createRange();
      r.selectNodeContents(box);
      window.getSelection().removeAllRanges();
      window.getSelection().addRange(r);
      document.execCommand('copy');
    }
    const btn = document.getElementById('btn-copy');
    btn.innerHTML = 'âœ“ &nbsp; Enlace Copiado';
    btn.classList.add('copied');
    setTimeout(() => {
      btn.innerHTML = 'ðŸ“‹ &nbsp; Copiar enlace';
      btn.classList.remove('copied');
    }, 2500);
  }

  // â”€â”€ COMPARTIR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function compartirLink() {
    if (!generatedLink) return;
    const guest = document.getElementById('inp-guest').value.trim();
    const text  = guest
      ? `${guest}, te invitamos a nuestra boda ðŸŽŠ\nAquÃ­ todos los detalles:`
      : 'Â¡EstÃ¡s invitado a nuestra boda! ðŸŽŠ\nAquÃ­ todos los detalles:';

    if (navigator.share) {
      navigator.share({ title: 'DAAL Â· InvitaciÃ³n', text, url: generatedLink }).catch(() => {});
    } else {
      window.open(`https://wa.me/?text=${encodeURIComponent(text + '\n' + generatedLink)}`, '_blank');
    }
  }

  // â”€â”€ CARGAR LISTA DE TOKENS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  async function cargarTokens() {
    const listEl = document.getElementById('tokens-list');
    const msgEl  = document.getElementById('msg-list');
    clearMsg(msgEl);
    setBtn('btn-gen', 'sp-list', 'txt-list', false, 'â†» &nbsp; Actualizar lista'); // solo spinner
    document.getElementById('sp-list').style.display = 'inline-block';
    document.getElementById('txt-list').innerHTML    = 'Cargandoâ€¦';

    const { data, error } = await sb
      .from('tokens')
      .select('token, usado, creado_en')
      .order('creado_en', { ascending: false })
      .limit(30);

    document.getElementById('sp-list').style.display = 'none';
    document.getElementById('txt-list').innerHTML    = 'â†» &nbsp; Actualizar lista';

    if (error) {
      showMsg(msgEl, 'error', 'Error al cargar los tokens.');
      return;
    }

    if (!data || data.length === 0) {
      listEl.innerHTML = '<p style="font-size:12px;color:var(--muted);text-align:center;padding:14px 0;">AÃºn no hay invitaciones generadas.</p>';
      return;
    }

    listEl.innerHTML = data.map(row => {
      const link  = `${SITE_URL}/?token=${row.token}`;
      const short = row.token.substring(0, 18) + 'â€¦';
      const badge = row.usado
        ? '<span class="tk-badge usado">Usado</span>'
        : '<span class="tk-badge active">Activo</span>';
      return `
        <div class="token-row">
          <span class="tk-val" title="${link}">${short}</span>
          ${badge}
          <button class="tk-copy" title="Copiar enlace" onclick="copiarTokenRow('${link}', this)">ðŸ“‹</button>
        </div>`;
    }).join('');
  }

  // â”€â”€ COPIAR DESDE LA LISTA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  async function copiarTokenRow(link, btn) {
    try { await navigator.clipboard.writeText(link); } catch { }
    btn.textContent = 'âœ“';
    setTimeout(() => { btn.textContent = 'ðŸ“‹'; }, 1800);
  }

  // â”€â”€ HELPERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function showMsg(el, type, text) {
    el.textContent = text;
    el.className   = `msg ${type}`;
  }
  function clearMsg(el) {
    el.textContent = '';
    el.className   = 'msg';
  }
  function setBtn(btnId, spId, txtId, loading, label) {
    document.getElementById(btnId).disabled         = loading;
    document.getElementById(spId).style.display     = loading ? 'inline-block' : 'none';
    document.getElementById(txtId).innerHTML        = label;
  }

  // Enter en login
  document.addEventListener('keydown', e => {
    if (e.key === 'Enter' && document.getElementById('view-login').style.display !== 'none') {
      handleLogin();
    }
  });
</script>

</body>
</html>